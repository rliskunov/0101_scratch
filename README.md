# Week 01. Scratch Task (Slurm –ù–∞–≤—ã–∫—É–º "Build Containers!")

## –ó–∞–¥–∞—á–∞

–ï—Å—Ç—å –º–∏–∫—Ä–æ-—Å–µ—Ä–≤–∏—Å –Ω–∞ Go (–∏—Å—Ö–æ–¥–Ω–∏–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —ç—Ç–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ). –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–ø–∞–∫–æ–≤–∞—Ç—å –≤ Docker-–æ–±—Ä–∞–∑, –∏—Å–ø–æ–ª—å–∑—É—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã [Scratch](https://hub.docker.com/_/scratch) (–≤–µ–¥—å –≤—Å–µ –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ Scratch &ndash; —ç—Ç–æ –∫—Ä—É—Ç–æ –∏ Go "–ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω –¥–ª—è –Ω–µ–≥–æ" üòà).

### –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∫–∞–∑–∞–ª —Å–ª–µ–¥—É—é—â–µ–µ* (–¥–æ—Å–ª–æ–≤–Ω–æ):
> –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Go, —Å–æ–±–∏—Ä–∞–µ–º –∫–æ–º–∞–Ω–¥–æ–π `go build -o app.bin cmd/main.go`, —Å–µ–π—á–∞—Å —Å–±–æ—Ä–∫–∞ –æ–ø–∏—Å–∞–Ω–∞ –≤ `Dockerfile`
>
> –£–º–µ–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã (HTTP Multipart –≤ –ø–æ–ª–µ `file`), –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ `http://localhost:9000/upload`, –∫–ª–∞–¥—ë—Ç –∏—Ö –≤ –∫–∞—Ç–∞–ª–æ–≥ `./upload`
>
> –í –æ—Ç–≤–µ—Ç –ø—Ä–∏–¥—ë—Ç –∫–æ–¥ 200

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ*: –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ –≤—Å—ë, —á—Ç–æ –≥–æ–≤–æ—Ä—è—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–º

–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–¥–æ—Å–ª–æ–≤–Ω–æ):
> –£–ø–∞–∫–æ–≤–∞—Ç—å –≤—Å—ë –≤ Docker, —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ `/upload` –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫–∞–∫ `VOLUME` (–∑–∞ –æ—Å–Ω–æ–≤—É –≤–∑—è—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π `Dockerfile`)
> 
> –ù–∏–∫–∞–∫–∏—Ö `entrypoint.sh` –∏ –¥—Ä—É–≥–∏—Ö sh-—Å–∫—Ä–∏–ø—Ç–æ–≤ –ø–∏—Å–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
> 
> –ü–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥) —Ç–æ–∂–µ –Ω–µ –Ω—É–∂–Ω–æ
> 
> –ù–∏–∫–∞–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å—Ç–∏–ª—è –∫–æ–¥–∞, –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–≤ —Ç–æ–º —á–∏—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –æ–±—Ä–∞–∑–æ–≤ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏) –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
>
> –°–±–æ—Ä–∫—É –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –≤ –≤–∏–¥–µ Multi-Stage
>
> –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω—É–∂–Ω–æ –Ω–µ –æ—Ç root'–∞ (–ø—Ä–æ–ø–∏—Å—ã–≤–∞–π—Ç–µ —ç—Ç–æ —è–≤–Ω–æ –≤ `Dockerfile`)
> 
> –í—ã–ª–æ–∂–∏—Ç—å –≤—Å—ë –≤ –≤–∏–¥–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ –Ω–∞ GHCR (GitHub Container Registry), —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ —Å–∞–º–∏ –∑–∞—Ç–µ—Å—Ç–∏—Ç—å –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. –í—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ –≤ –≤–∏–¥–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GitHub
2. –í—Å—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ GitHub Actions
3. –û–±—Ä–∞–∑ –¥–æ–ª–∂–µ–Ω –≤—ã–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è –≤ GitHub Container Registry (GHCR)

–ö —Ç–µ–∫—É—â–µ–º—É –∑–∞–¥–∞–Ω–∏—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ä—è–≤–ª—è—é—Ç—Å—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. Docker Legacy Build ([`DOCKER_BUILDKIT=0 docker build .`](https://github.com/docker/cli/pull/3314))
2. Multi-Stage
